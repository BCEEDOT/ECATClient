
  <div *ngIf="showUnstrat" class="text-center pad-top-xs" style="color:grey">
    Drag group members from the left list to the right to stratify.
  </div>
  
  <div fxLayout="row" fxLayoutGap="50px" class="pad-left-md pad-right-md pad-bottom-md pad-top-sm">
    <md-list id="unstratted" [dragula]='"bag-one"' [dragulaModel]='unstratted' fxFlex *ngIf='showUnstrat && !readOnly' style="min-height: 50px; border-width: 2px; border-style:solid; border-color:lightgrey;">
      <md-list-item *ngFor="let unstrat of unstratted" [id]="unstrat?.assesseePersonId" >
        <button md-raised-button fxFlex class="text-left" style="cursor: move;"><md-icon>reorder</md-icon> {{unstrat?.assessee?.rankName}}</button>
      </md-list-item>
    </md-list>
    
    <md-list id="stratted" [dragula]='"bag-one"' [dragulaModel]='stratted' fxFlex style="min-height: 50px; border-width: 2px; border-style:inset; border-color:lightgrey; padding-bottom:5px" *ngIf='!readOnly' [ngClass]="(!showUnstrat)?'notopen':''">
      <md-list-item *ngFor="let strat of stratted" [id]="strat?.assesseePersonId">
        <button md-raised-button fxFlex style="cursor: move;">
          <div fxFlexLayout="row"  fxLayoutGap="10px">
            <md-icon style="padding-top: 7px; vertical-align: middle;">reorder</md-icon>
            <div>{{strat?.assessee?.rankName}}</div>
            <div fxFlex></div> 
            <div><span style="color: #3e6d92; font-size:large"><strong>{{strat?.stratPosition}}</strong></span></div>
          </div>
        </button>
      </md-list-item>
    </md-list>
  
    <md-list id="stratted" fxFlex class="notopen" style="min-height: 50px; border-width: 2px; border-style:solid; border-color:lightgrey; padding-bottom:5px" *ngIf='readOnly' [ngClass]="(!showUnstrat)?'notopen':''">
      <md-list-item *ngFor="let strat of stratted" [id]="strat?.assesseePersonId">
          <button md-raised-button disableRipple fxFlex style="cursor:default">
              <div fxFlexLayout="row"  fxLayoutGap="10px">
                <md-icon style="padding-top: 7px; vertical-align: middle;">person</md-icon>
                <div>{{strat?.assessee?.rankName}}</div>
                <div fxFlex></div> 
                <div><span style="color: #3e6d92; font-size:large"><strong>{{strat?.stratPosition}}</strong></span></div>
              </div>
            </button>
      </md-list-item>
    </md-list>
  </div>
  <md-divider></md-divider>
  
  <md-card-actions fxLayout="row" fxLayoutAlign="end">
    <button md-raised-button color="primary" type="button" [disabled]="!isDirty()" (click)="cancel();">Cancel</button>
    <button md-raised-button color="primary" type="button" [disabled]="!isComplete() || !isDirty()" (click)="saveChanges()">Save</button>
  </md-card-actions>
  
  
  <!--md-list>
    <md-list-item>
      <div fxFlex="55"></div>
      <div fxFlex="10" class="pad-left-md md-body-1 tc-grey-500">Strat</div>
      <div fxFlex="15" class="pad-left-sm md-body-1 tc-grey-500"><span *ngIf="!readOnly">Proposed Change</span></div>
      <div fxFlex="10"></div>
    </md-list-item>
    <md-divider></md-divider>
    <!--<md-list class="will-load">-->
  
    <!--ng-template let-member let-last="last" ngFor [ngForOf]="groupMembers">
      <md-list-item>
        <md-icon md-list-avatar>person</md-icon>
        <div fxFlex="55">
          <h3 class="md-subhead">{{member?.rankName}}</h3>
        </div>
        <div fxFlex="10">
          <h3>{{member?.statusOfStudent.stratedPosition}}</h3>
        </div>
  
        <div fxFlex="15" *ngIf="!readOnly">
          <div layout-margin>
            <md-input-container>
              <input mdInput memberStratForm="ngModel" [(ngModel)]="member.proposedStratPosition" (ngModelChange)="evaluateStrat(); isValid(); isPristine()"
                name="proposedMemberStrat" min="1" max="{{groupCount}}" type="number">
            </md-input-container>
          </div>
        </div>
        <div fxFlex="10" *ngIf="!readOnly">
          <span *ngIf="isPristine()">
            <span *ngIf="member.stratIsValid">
                Valid
              </span>
            <span *ngIf="!member.stratIsValid">
              <span mdTooltip="{{member.stratValidationErrors[0].cat}}" mdTooltipPosition="above" class="tc-red-500" >Invalid</span>
            </span>
          </span>
        </div>
      </md-list-item>
    </ng-template>
    
  </md-list-->

<!-- <md-list>
  <md-list-item>
    <span fxFlex="55" fxFlexOffset="3%"></span>
    <span fxFlex="10" fxFlex.xs="10" fxFlexOffset="3%" class="pad-left md-body-1 tc-grey-500">Strat</span>
    <span fxFlex="15" fxFlex.xs="20" fxFlexOffset="2%" class="pad-left md-body-1 tc-grey-500">
      <span *ngIf="!readOnly">Proposed Change</span>
    </span>
    <span fxFlex="10"></span>
  </md-list-item>
  <md-divider></md-divider>
  <!--<md-list class="will-load">-->
  <!--md-list-item>
    <md-icon fxHide.xs md-list-avatar>person</md-icon>
    <h3 md-line>{{user?.rankName}}</h3>
    <div fxFlex="10" fxFlex.xs="10">
      <h3 md-line>{{user?.statusOfPeer[user?.studentId].stratedPosition}}</h3>
    </div>

    <div fxFlex="15" fxFlex.xs="15" *ngIf="!readOnly">
      <div layout-margin>
        <md-input-container>
          <input mdInput [(ngModel)]="user.proposedStratPosition" (ngModelChange)="evaluateStrat(); isValid(); isPristine()" name="proposedUserStrat"
            min="1" max="{{groupCount}}" type="number">
        </md-input-container>
      </div>
    </div>
    <div fxFlex="10" *ngIf="!readOnly">
      <span *ngIf="isPristine()">
        <span *ngIf="user.stratIsValid">
          Valid
        </span>
        <span *ngIf="!user.stratIsValid">
          <span mdTooltip="{{user.stratValidationErrors[0].cat}}" mdTooltipPosition="above" class="tc-red-500">Invalid</span>
        </span>
      </span>
    </div>
    <div fxFlex="25" *ngIf="readOnly">
    </div>
  </md-list-item>
  <md-divider class="bgc-dark-orange-500" md-inset></md-divider>
  <ng-template let-peer let-last="last" ngFor [ngForOf]="peers">
    <md-list-item>
      <md-icon fxHide.xs md-list-avatar>person</md-icon>
      <h3 md-line>{{peer?.rankName}}</h3>
      <div fxFlex="10" fxFlex.xs="10">
        <h3 md-line>{{user?.statusOfPeer[peer?.studentId].stratedPosition}}</h3>
      </div>

      <div fxFlex="15" fxFlex.xs="15" *ngIf="!readOnly">
        <div layout-margin>
          <md-input-container>
            <input mdInput peerStratForm="ngModel" [(ngModel)]="peer.proposedStratPosition" (ngModelChange)="evaluateStrat(); isValid(); isPristine()"
              name="proposedPeerStrat" min="1" max="{{groupCount}}" type="number">
          </md-input-container>
        </div>
      </div>
      <div fxFlex="10" *ngIf="!readOnly">
        <span *ngIf="isPristine()">
          <span *ngIf="peer.stratIsValid">
            Valid
          </span>
          <span *ngIf="!peer.stratIsValid">
            <span mdTooltip="{{peer.stratValidationErrors[0].cat}}" mdTooltipPosition="above" class="tc-red-500">Invalid</span>
          </span>
        </span>
      </div>
      <div fxFlex="25" *ngIf="readOnly">
      </div>

    </md-list-item>
  </ng-template>
</md-list>
<md-divider></md-divider>

<md-list-item fxShow fxHide.xs layout="row" layout-align="end" layout-margin>
  <button md-raised-button color="primary" type="button" class="text-upper" [disabled]="!isPristine()" (click)="cancel();">Cancel</button>
  <button md-raised-button color="primary" type="button" [disabled]="isValid()" (click)="saveChanges()" class="text-upper">Save</button>
</md-list-item>

<md-list-item fxHide fxShow.xs layout="row" layout-align="end" layout-margin>
  <button md-icon-button color="primary" type="button" class="text-upper" [disabled]="!isPristine()" (click)="cancel();">
      <md-icon mdTooltip="Cancel" mdTooltipPosition="before" class="large-icon">cancel</md-icon>
  </button>
  <button md-icon-button color="primary" type="button" [disabled]="isValid()" (click)="saveChanges()" class="text-upper">
      <md-icon mdTooltip="Save" mdTooltipPosition="before" class="large-icon">save</md-icon>
  </button>
</md-list-item> -->