
  <div *ngIf="showUnstrat" class="text-center pad-top-xs" style="color:grey">
    Drag group members from the left list to the right to stratify.
  </div>
  
  <div fxLayout="row" fxLayoutGap="50px" class="pad-left-md pad-right-md pad-bottom-md pad-top-md">
    <mat-list id="unstratted" [dragula]='"bag-one"' [dragulaModel]='unstratted' fxFlex *ngIf='showUnstrat && !readOnly' style="background-color: #f9f9f9; min-height: 50px; border-width: 2px; border-style:dashed; border-color:#e0e0e0;">
      <mat-list-item *ngFor="let unstrat of unstratted" [id]="unstrat?.assesseePersonId" >
        <button mat-raised-button fxFlex class="text-left" style="cursor: move;"><mat-icon>drag_handle</mat-icon> {{unstrat?.assessee?.rankName}}</button>
      </mat-list-item>
    </mat-list>
    
    <mat-list id="stratted" [dragula]='"bag-one"' [dragulaModel]='stratted' fxFlex style="background-color: #f9f9f9; min-height: 50px; border-width: 2px; border-style:dashed; border-color:#e0e0e0; padding-bottom:5px" *ngIf='!readOnly' [ngClass]="(!showUnstrat)?'notopen':''">
      <mat-list-item *ngFor="let strat of stratted" [id]="strat?.assesseePersonId">
        <button mat-raised-button fxFlex style="cursor: move;">
          <div fxFlexLayout="row"  fxLayoutGap="10px">
            <mat-icon style="padding-top: 7px; vertical-align: middle;">drag_handle</mat-icon>
            <div>{{strat?.assessee?.rankName}}</div>
            <div fxFlex></div> 
            <div><span style="color: #3e6d92; font-size:large"><strong>{{strat?.stratPosition}}</strong></span></div>
          </div>
        </button>
      </mat-list-item>
    </mat-list>
  
    <mat-list id="stratted" fxFlex class="notopen" style="min-height: 50px;" *ngIf='readOnly' [ngClass]="(!showUnstrat)?'notopen':''">
      <mat-list-item *ngFor="let strat of stratted" [id]="strat?.assesseePersonId">
          <button mat-raised-button disableRipple fxFlex style="cursor:default">
              <div fxFlexLayout="row"  fxLayoutGap="10px">
                <mat-icon style="padding-top: 7px; vertical-align: middle;">person</mat-icon>
                <div>{{strat?.assessee?.rankName}}</div>
                <div fxFlex></div> 
                <div><span style="color: #3e6d92; font-size:large"><strong>{{strat?.stratPosition}}</strong></span></div>
              </div>
            </button>
      </mat-list-item>
    </mat-list>
  </div>
  <mat-divider></mat-divider>
  
  <mat-card-actions fxLayout="row" fxLayoutAlign="end">
    <button mat-raised-button color="primary" type="button" [disabled]="!isDirty()" (click)="cancel();">Cancel</button>
    <button mat-raised-button color="primary" type="button" [disabled]="!isComplete() || !isDirty()" (click)="saveChanges()">Save</button>
  </mat-card-actions>
  
  
  <!--mat-list>
    <mat-list-item>
      <div fxFlex="55"></div>
      <div fxFlex="10" class="pad-left-md md-body-1 tc-grey-500">Strat</div>
      <div fxFlex="15" class="pad-left-sm md-body-1 tc-grey-500"><span *ngIf="!readOnly">Proposed Change</span></div>
      <div fxFlex="10"></div>
    </mat-list-item>
    <mat-divider></mat-divider>
    <!--<mat-list class="will-load">-->
  
    <!--ng-template let-member let-last="last" ngFor [ngForOf]="groupMembers">
      <mat-list-item>
        <mat-icon mat-list-avatar>person</mat-icon>
        <div fxFlex="55">
          <h3 class="md-subhead">{{member?.rankName}}</h3>
        </div>
        <div fxFlex="10">
          <h3>{{member?.statusOfStudent.stratedPosition}}</h3>
        </div>
  
        <div fxFlex="15" *ngIf="!readOnly">
          <div layout-margin>
            <mat-form-field>
              <input matInput memberStratForm="ngModel" [(ngModel)]="member.proposedStratPosition" (ngModelChange)="evaluateStrat(); isValid(); isPristine()"
                name="proposedMemberStrat" min="1" max="{{groupCount}}" type="number">
            </mat-form-field>
          </div>
        </div>
        <div fxFlex="10" *ngIf="!readOnly">
          <span *ngIf="isPristine()">
            <span *ngIf="member.stratIsValid">
                Valid
              </span>
            <span *ngIf="!member.stratIsValid">
              <span matTooltip="{{member.stratValidationErrors[0].cat}}" matTooltipPosition="above" class="tc-red-500" >Invalid</span>
            </span>
          </span>
        </div>
      </mat-list-item>
    </ng-template>
    
  </mat-list-->

<!-- <mat-list>
  <mat-list-item>
    <span fxFlex="55" fxFlexOffset="3%"></span>
    <span fxFlex="10" fxFlex.xs="10" fxFlexOffset="3%" class="pad-left md-body-1 tc-grey-500">Strat</span>
    <span fxFlex="15" fxFlex.xs="20" fxFlexOffset="2%" class="pad-left md-body-1 tc-grey-500">
      <span *ngIf="!readOnly">Proposed Change</span>
    </span>
    <span fxFlex="10"></span>
  </mat-list-item>
  <mat-divider></mat-divider>
  <!--<mat-list class="will-load">-->
  <!--mat-list-item>
    <mat-icon fxHide.xs mat-list-avatar>person</mat-icon>
    <h3 matLine>{{user?.rankName}}</h3>
    <div fxFlex="10" fxFlex.xs="10">
      <h3 matLine>{{user?.statusOfPeer[user?.studentId].stratedPosition}}</h3>
    </div>

    <div fxFlex="15" fxFlex.xs="15" *ngIf="!readOnly">
      <div layout-margin>
        <mat-form-field>
          <input matInput [(ngModel)]="user.proposedStratPosition" (ngModelChange)="evaluateStrat(); isValid(); isPristine()" name="proposedUserStrat"
            min="1" max="{{groupCount}}" type="number">
        </mat-form-field>
      </div>
    </div>
    <div fxFlex="10" *ngIf="!readOnly">
      <span *ngIf="isPristine()">
        <span *ngIf="user.stratIsValid">
          Valid
        </span>
        <span *ngIf="!user.stratIsValid">
          <span matTooltip="{{user.stratValidationErrors[0].cat}}" matTooltipPosition="above" class="tc-red-500">Invalid</span>
        </span>
      </span>
    </div>
    <div fxFlex="25" *ngIf="readOnly">
    </div>
  </mat-list-item>
  <mat-divider class="bgc-dark-orange-500" md-inset></mat-divider>
  <ng-template let-peer let-last="last" ngFor [ngForOf]="peers">
    <mat-list-item>
      <mat-icon fxHide.xs mat-list-avatar>person</mat-icon>
      <h3 matLine>{{peer?.rankName}}</h3>
      <div fxFlex="10" fxFlex.xs="10">
        <h3 matLine>{{user?.statusOfPeer[peer?.studentId].stratedPosition}}</h3>
      </div>

      <div fxFlex="15" fxFlex.xs="15" *ngIf="!readOnly">
        <div layout-margin>
          <mat-form-field>
            <input matInput peerStratForm="ngModel" [(ngModel)]="peer.proposedStratPosition" (ngModelChange)="evaluateStrat(); isValid(); isPristine()"
              name="proposedPeerStrat" min="1" max="{{groupCount}}" type="number">
          </mat-form-field>
        </div>
      </div>
      <div fxFlex="10" *ngIf="!readOnly">
        <span *ngIf="isPristine()">
          <span *ngIf="peer.stratIsValid">
            Valid
          </span>
          <span *ngIf="!peer.stratIsValid">
            <span matTooltip="{{peer.stratValidationErrors[0].cat}}" matTooltipPosition="above" class="tc-red-500">Invalid</span>
          </span>
        </span>
      </div>
      <div fxFlex="25" *ngIf="readOnly">
      </div>

    </mat-list-item>
  </ng-template>
</mat-list>
<mat-divider></mat-divider>

<mat-list-item fxShow fxHide.xs layout="row" layout-align="end" layout-margin>
  <button mat-raised-button color="primary" type="button" class="text-upper" [disabled]="!isPristine()" (click)="cancel();">Cancel</button>
  <button mat-raised-button color="primary" type="button" [disabled]="isValid()" (click)="saveChanges()" class="text-upper">Save</button>
</mat-list-item>

<mat-list-item fxHide fxShow.xs layout="row" layout-align="end" layout-margin>
  <button mat-icon-button color="primary" type="button" class="text-upper" [disabled]="!isPristine()" (click)="cancel();">
      <mat-icon matTooltip="Cancel" matTooltipPosition="before" class="large-icon">cancel</mat-icon>
  </button>
  <button mat-icon-button color="primary" type="button" [disabled]="isValid()" (click)="saveChanges()" class="text-upper">
      <mat-icon matTooltip="Save" matTooltipPosition="before" class="large-icon">save</mat-icon>
  </button>
</mat-list-item> -->